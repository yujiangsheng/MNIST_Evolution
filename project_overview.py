#!/usr/bin/env python3
"""
é¡¹ç›®æ¦‚è§ˆè„šæœ¬

è¿è¡Œæ­¤è„šæœ¬å¯ä»¥æŸ¥çœ‹é¡¹ç›®çš„å®Œæ•´ä¿¡æ¯ï¼š
- é¡¹ç›®ç»“æ„
- æ¨¡å—è¯´æ˜
- ä»£ç ç»Ÿè®¡
- å¿«é€Ÿå‘½ä»¤
"""

import os
import sys


def print_header(title):
    """æ‰“å°æ ‡é¢˜"""
    print("\n" + "="*70)
    print(f" {title}")
    print("="*70)


def count_lines(filepath):
    """ç»Ÿè®¡æ–‡ä»¶è¡Œæ•°"""
    try:
        with open(filepath, 'r', encoding='utf-8') as f:
            return len(f.readlines())
    except:
        return 0


def main():
    """ä¸»å‡½æ•°"""
    
    print_header("MNIST è¿›åŒ–å­¦ä¹ ç³»ç»Ÿ - é¡¹ç›®æ¦‚è§ˆ")
    
    # é¡¹ç›®ä¿¡æ¯
    print("\nğŸ“‹ é¡¹ç›®ä¿¡æ¯:")
    print("  åç§°: MNISTè¿›åŒ–å­¦ä¹ ç³»ç»Ÿ")
    print("  ç‰ˆæœ¬: 2.0 (é‡æ„ç‰ˆ)")
    print("  ä½œè€…: Jiangsheng Yu")
    print("  æ—¥æœŸ: 2026å¹´1æœˆ3æ—¥")
    print("  ç›®æ ‡: é€šè¿‡è¿›åŒ–ç®—æ³•+é—­å¼è§£+åå‘ä¼ æ’­è¾¾åˆ°99%ä»¥ä¸Šå‡†ç¡®ç‡")
    
    # æ ¸å¿ƒæ¨¡å—
    print_header("æ ¸å¿ƒæ¨¡å—")
    modules = [
        ("config.py", "é…ç½®ç®¡ç†", "æ‰€æœ‰è¶…å‚æ•°å’Œé…ç½®é¡¹"),
        ("data_loader.py", "æ•°æ®åŠ è½½", "MNISTæ•°æ®åŠ è½½ã€å¢å¼ºã€é¢„å¤„ç†"),
        ("models.py", "æ¨¡å‹å®šä¹‰", "RandomCNNå’ŒFineTuneCNN"),
        ("evolution.py", "è¿›åŒ–ç®—æ³•", "æ¶æ„æœç´¢ã€çªå˜ã€é€‰æ‹©"),
        ("trainer.py", "è®­ç»ƒå™¨", "æ™ºèƒ½è®­ç»ƒç­–ç•¥å’Œä¼˜åŒ–"),
        ("utils.py", "å·¥å…·å‡½æ•°", "ç‰¹å¾æå–ã€è¯„ä¼°ã€å¯è§†åŒ–"),
        ("main.py", "ä¸»ç¨‹åº", "æ•´ä½“æµç¨‹åè°ƒ"),
    ]
    
    print("\n{:<20} {:<15} {:<10} {}".format("æ–‡ä»¶", "åŠŸèƒ½", "ä»£ç è¡Œæ•°", "è¯´æ˜"))
    print("-"*70)
    
    total_lines = 0
    for filename, func, desc in modules:
        lines = count_lines(filename)
        total_lines += lines
        print("{:<20} {:<15} {:<10} {}".format(filename, func, lines, desc))
    
    print("-"*70)
    print(f"{'æ€»è®¡':<20} {'':<15} {total_lines:<10}")
    
    # æ–‡æ¡£æ–‡ä»¶
    print_header("æ–‡æ¡£æ–‡ä»¶")
    docs = [
        ("README_MNIST_Evolution.md", "å®Œæ•´é¡¹ç›®æ–‡æ¡£"),
        ("REFACTORING_SUMMARY.md", "é‡æ„æ€»ç»“"),
        ("QUICK_REFERENCE.py", "å¿«é€Ÿå‚è€ƒæŒ‡å—"),
        ("requirements.txt", "ä¾èµ–åˆ—è¡¨"),
        (".gitignore", "Gité…ç½®"),
    ]
    
    print("\n{:<30} {}".format("æ–‡ä»¶", "è¯´æ˜"))
    print("-"*70)
    for filename, desc in docs:
        status = "âœ“" if os.path.exists(filename) else "âœ—"
        print(f"{status} {filename:<28} {desc}")
    
    # å¿«é€Ÿå‘½ä»¤
    print_header("å¿«é€Ÿå‘½ä»¤")
    print("""
ğŸ“¦ å®‰è£…ä¾èµ–:
   pip install -r requirements.txt

ğŸš€ è¿è¡Œè®­ç»ƒ:
   python main.py

ğŸ§ª æµ‹è¯•æ¨¡å—:
   python data_loader.py   # æµ‹è¯•æ•°æ®åŠ è½½
   python models.py        # æµ‹è¯•æ¨¡å‹
   python evolution.py     # æµ‹è¯•è¿›åŒ–ç®—æ³•
   python trainer.py       # æµ‹è¯•è®­ç»ƒå™¨
   python utils.py         # æµ‹è¯•å·¥å…·å‡½æ•°

ğŸ“– æŸ¥çœ‹æ–‡æ¡£:
   æŸ¥çœ‹ README_MNIST_Evolution.md
   æŸ¥çœ‹ QUICK_REFERENCE.py

âš™ï¸ ä¿®æ”¹é…ç½®:
   ç¼–è¾‘ config.py
    """)
    
    # é¡¹ç›®ç‰¹ç‚¹
    print_header("é¡¹ç›®ç‰¹ç‚¹")
    features = [
        "ğŸ§¬ è¿›åŒ–ç®—æ³•è‡ªåŠ¨æœç´¢æœ€ä¼˜æ¶æ„",
        "âš¡ é—­å¼è§£å¿«é€Ÿè¯„ä¼°ï¼ˆæ— éœ€åå‘ä¼ æ’­ï¼‰",
        "ğŸ¤– Aæ™ºèƒ½ç›‘æ§å’Œä¼˜åŒ–è®­ç»ƒè¿‡ç¨‹",
        "ğŸ“Š ä¸¤é˜¶æ®µè®­ç»ƒç­–ç•¥ï¼ˆ93% â†’ 99%+ï¼‰",
        "ğŸ¯ æœ€ç»ˆå‡†ç¡®ç‡99.5%+",
        "ğŸ“ å®Œæ•´çš„ä¸­æ–‡æ³¨é‡Šå’Œæ–‡æ¡£",
        "ğŸ”§ æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•",
        "âš™ï¸ é…ç½®é›†ä¸­ç®¡ç†ï¼Œæ–¹ä¾¿è°ƒå‚",
    ]
    
    print()
    for feature in features:
        print(f"  {feature}")
    
    # è®­ç»ƒæµç¨‹
    print_header("è®­ç»ƒæµç¨‹")
    print("""
é˜¶æ®µ1: è¿›åŒ–æœç´¢ + é—­å¼è§£è®­ç»ƒ (ç›®æ ‡: 93%)
  â”œâ”€ åˆå§‹åŒ–éšæœºç§ç¾¤
  â”œâ”€ ç”¨é—­å¼è§£å¿«é€Ÿè¯„ä¼°æ¯ä¸ªæ¶æ„
  â”œâ”€ é€‰æ‹©ç²¾è‹±æ¶æ„è¿›è¡Œç¹æ®–
  â””â”€ è¾¾åˆ°ç›®æ ‡åè¾“å‡ºæœ€ä¼˜æ¶æ„

é˜¶æ®µ2: åå‘ä¼ æ’­å¾®è°ƒ (ç›®æ ‡: 99.1%)
  â”œâ”€ åŸºäºæœ€ä¼˜æ¶æ„åˆ›å»ºå¯è®­ç»ƒæ¨¡å‹
  â”œâ”€ Aæ™ºèƒ½ç›‘æ§è®­ç»ƒçŠ¶æ€
  â”œâ”€ åŠ¨æ€è°ƒæ•´å­¦ä¹ ç‡å’Œæ­£åˆ™åŒ–
  â””â”€ è¾¾åˆ°ç›®æ ‡ååœæ­¢è®­ç»ƒ

æœ€ç»ˆæµ‹è¯•:
  â””â”€ åœ¨æµ‹è¯•é›†ä¸Šè¯„ä¼°æœ€ç»ˆæ€§èƒ½
    """)
    
    # æ€§èƒ½æŒ‡æ ‡
    print_header("æ€§èƒ½æŒ‡æ ‡")
    print("""
é˜¶æ®µ1 (è¿›åŒ–+é—­å¼è§£):
  å‡†ç¡®ç‡: 92-93%
  ç”¨æ—¶: ~2åˆ†é’Ÿ
  
é˜¶æ®µ2 (åå‘ä¼ æ’­):
  å‡†ç¡®ç‡: 99.1-99.2%
  ç”¨æ—¶: ~1-2åˆ†é’Ÿ
  
æœ€ç»ˆæµ‹è¯•:
  å‡†ç¡®ç‡: 99.4-99.6%
  æ€»ç”¨æ—¶: ~3-5åˆ†é’Ÿ
    """)
    
    # å¸¸è§é—®é¢˜
    print_header("å¸¸è§é—®é¢˜")
    print("""
Q: å¦‚ä½•æé«˜å‡†ç¡®ç‡ï¼Ÿ
A: å¢åŠ è®­ç»ƒæ•°æ®(TRAIN_SIZE)ã€å»¶é•¿è®­ç»ƒ(MAX_EPOCHS)ã€å¼€å¯æ•°æ®å¢å¼º

Q: æ˜¾å­˜/å†…å­˜ä¸è¶³ï¼Ÿ
A: å‡å°æ‰¹æ¬¡å¤§å°(BATCH_SIZE)ã€é™ä½ç‰¹å¾ç»´åº¦(MAX_FEATURE_DIM)

Q: è®­ç»ƒé€Ÿåº¦æ…¢ï¼Ÿ
A: å‡å°‘è®­ç»ƒæ•°æ®ã€å‡å°‘è¿›åŒ–ä»£æ•°ã€å‡å°ç§ç¾¤å¤§å°

Q: å¦‚ä½•ä¿å­˜æ¨¡å‹ï¼Ÿ
A: ä½¿ç”¨ utils.save_model() å‡½æ•°

Q: å¦‚ä½•è‡ªå®šä¹‰æ¶æ„ç©ºé—´ï¼Ÿ
A: ä¿®æ”¹ evolution.py ä¸­çš„ sample_architecture() å‡½æ•°
    """)
    
    # ä¸‹ä¸€æ­¥
    print_header("ä¸‹ä¸€æ­¥")
    print("""
1. æŸ¥çœ‹å®Œæ•´æ–‡æ¡£: README_MNIST_Evolution.md
2. æŸ¥çœ‹ä»£ç ç¤ºä¾‹: QUICK_REFERENCE.py
3. è¿è¡Œè®­ç»ƒ: python main.py
4. æ ¹æ®éœ€è¦ä¿®æ”¹ config.py ä¸­çš„å‚æ•°
5. å°è¯•è‡ªå®šä¹‰æ¶æ„ç©ºé—´å’Œè®­ç»ƒç­–ç•¥
    """)
    
    print("\n" + "="*70)
    print(" ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼Happy Training! ğŸ‰")
    print("="*70 + "\n")


if __name__ == "__main__":
    main()
